#!/bin/bash
# 2d0d3b572db51a8b8f4e6fa30cc80a99511e627ef29e39c768bd5cc41489bdaf
# encoded with bash64 - https://github.com/KamaranL/bash64
MAIN='IyEvdXNyL2Jpbi9lbnYgYmFzaAoKKCgke0JBU0hfVkVSU0lPTjo6MX0gPCA0KSkgJiYgewoke19fTUFJTl9fIyMqXC99CiAgICBleGl0IDEKfQoKZnVuY3Rpb24gcDoKeyAjIHByaW50CiAgICAoKCEkIykpICYmIHJldHVybiAxCgogICAgcDo6YSgpCiAgICB7ICMgYXJyYXkKICAgICAgICBsb2NhbCBrCiAgICAgICAgbG9jYWwgLW4gYXJyYXk9IiQxIgoKICAgICAgICByZXMrPSIkcHJlJDE9KFxuIgogICAgICAgIGZvciBrIGluICIkeyFhcnJheVtAXX0iOyBkbwogICAgICAgICAgICByZXMrPSIkKAogICAgICAgICAgICAgICAgcHJpbnRmICIlLjBzICIgezEuLjR9ICYmCiAgICAgICAgICAgICAgICAgICAgcHJpbnRmICIke2t9PSR7YXJyYXlbJGtdfSVzIiAiXG4iCiAgICAgICAgICAgICkiCiAgICAgICAgZG9uZQogICAgICAgIHJlcys9IiRwcmUpXG4iCgogICAgICAgIHJldHVybiAwCiAgICB9CgogICAgcDo6a3ZwKCkKICAgIHsgIyBrZXktdmFsdWUgcGFpcgogICAgICAgIGxvY2FsIC1BIGFyZwogICAgICAgIGxvY2FsIC1hIHBvcwogICAgICAgIGxvY2FsIHJlcwoKICAgICAgICB3aGlsZSAoKCQjKSk7IGRvCiAgICAgICAgICAgIGNhc2UgIiQxIiBpbgogICAgICAgICAgICAtZCkgIyBkZWxpbWl0ZXIKICAgICAgICAgICAgICAgIFsgISAteiAiJDIiIF0gJiYKICAgICAgICAgICAgICAgICAgICBhcmdbZF09IiQyIiAmJiBzaGlmdAogICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgLWspICMga2V5CiAgICAgICAgICAgICAgICBhcmdba109dHJ1ZQogICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgLXYpICMgdmFsdWUKICAgICAgICAgICAgICAgIGFyZ1t2XT10cnVlCiAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAqKSAjIHBvc2l0aW9uYWxzCiAgICAgICAgICAgICAgICBwb3MrPSgiJDEiKQogICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgZXNhYwogICAgICAgICAgICBzaGlmdAogICAgICAgIGRvbmUKICAgICAgICAoKCEkeyNwb3NbQF19KSkgJiYgcmV0dXJuIDEKCiAgICAgICAgWyAteiAiJHthcmdbZF19IiBdICYmIGFyZ1tkXT0nICcKICAgICAgICBJRlM9IiR7YXJnW2RdfSIKICAgICAgICByZWFkIC1yYSByZXMgPDw8IiR7cG9zW0BdfSIKICAgICAgICB1bnNldCBJRlMKCiAgICAgICAgaWYgWyAiJHthcmdba119IiA9PSB0cnVlIF07IHRoZW4KICAgICAgICAgICAgWyAteiAiJHtyZXNbMF19IiBdICYmIHJldHVybiAxCiAgICAgICAgICAgIGVjaG8gLWUgIiR7cmVzWzBdfSIgJiYgcmV0dXJuIDAKICAgICAgICBlbGlmIFsgIiR7YXJnW3ZdfSIgPT0gdHJ1ZSBdOyB0aGVuCiAgICAgICAgICAgIFsgLXogIiR7cmVzWzFdfSIgXSAmJiByZXR1cm4gMQogICAgICAgICAgICBlY2hvIC1lICIke3Jlc1sxXX0iICYmIHJldHVybiAwCiAgICAgICAgZmkKICAgIH0KCiAgICBsb2NhbCAtQSBhcmcKICAgIGxvY2FsIC1hIHBvcwogICAgbG9jYWwgcmVzIHByZQoKICAgIHdoaWxlICgoJCMpKTsgZG8KICAgICAgICBjYXNlICIkMSIgaW4KICAgICAgICAtYSkgIyBhcnJheQogICAgICAgICAgICBhcmdbYV09dHJ1ZQogICAgICAgICAgICA7OwogICAgICAgIC1lKSAjIGVycm9yCiAgICAgICAgICAgIGFyZ1tlXT10cnVlCiAgICAgICAgICAgIDs7CiAgICAgICAgLS1mbikgIyBmdW5jdGlvbiBuYW1lIGZvcm1hdAogICAgICAgICAgICBbIC16ICIkMiIgXSAmJiByZXR1cm4gMQogICAgICAgICAgICByZXM9IiR7Mi8vXCAvLX0iICYmIHJlcz0iJHtyZXMvL1wvLy59IgogICAgICAgICAgICBlY2hvIC1lICIke3JlcywsfSIgJiYgcmV0dXJuIDAKICAgICAgICAgICAgOzsKICAgICAgICAtayB8IC12KSAjIGtleSB8IHZhbHVlCiAgICAgICAgICAgIHA6Omt2cCAiJEAiCiAgICAgICAgICAgIHJldHVybiAkPwogICAgICAgICAgICA7OwogICAgICAgIC13KSAjIHdhcm4KICAgICAgICAgICAgYXJnW3ddPXRydWUKICAgICAgICAgICAgOzsKICAgICAgICAteCkgIyB2ZXJib3NlL3Rlc3QKICAgICAgICAgICAgYXJnW3hdPXRydWUKICAgICAgICAgICAgOzsKICAgICAgICAqKSAjIHBvc2l0aW9uYWxzCiAgICAgICAgICAgIHBvcys9KCIkMSIpCiAgICAgICAgICAgIDs7CiAgICAgICAgZXNhYwogICAgICAgIHNoaWZ0CiAgICBkb25lCiAgICAoKCEkeyNwb3NbQF19KSkgJiYgcmV0dXJuIDEKCiAgICBbICIke2FyZ1t4XX0iID09IHRydWUgXSAmJiB7CiAgICAgICAgWyAiJHthW3hdfSIgPT0gdHJ1ZSBdICYmIHsKICAgICAgICAgICAgcHJlPSIjIyMgIgogICAgICAgIH0gfHwgcmV0dXJuIDAKICAgIH0KCiAgICBbICIke2FyZ1thXX0iID09IHRydWUgXSAmJiB7CiAgICAgICAgZm9yIGFyciBpbiAiJHtwb3NbQF19IjsgZG8KICAgICAgICAgICAgcDo6YSAiJGFyciIKICAgICAgICBkb25lCiAgICAgICAgZWNobyAtZSAiJHJlcyIgJiYgcmV0dXJuIDAKICAgIH0gfHwgcmVzPSIke3Bvc1sqXX0iCgogICAgaWYgWyAiJHthcmdbd119IiA9PSB0cnVlIF07IHRoZW4KICAgICAgICBwcmU9IlwwMzNbMW1XQVJOXDAzM1swbVx0IgogICAgZWxpZiBbICIke2FyZ1tlXX0iID09IHRydWUgXTsgdGhlbgogICAgICAgIHByZT0iXDAzM1sxbUVSUk9SXDAzM1swbVx0IgogICAgZmkKCiAgICBlY2hvIC1lICIkcHJlJHJlcyIKICAgIHJldHVybiAwCn0KCmZ1bmN0aW9uIC50cmFjZQp7ICNwcmludCAodm9pZC1vbmx5KSBjYWxsZXIgZnVuY3Rpb24KICAgIFsgIiR7YVt4eF19IiAhPSB0cnVlIF0gJiYgcmV0dXJuIDEKICAgIHA6IC14IGludm9raW5nICIke0ZVTkNOQU1FWzFdfSgkKikiICYmIHJldHVybiAwCn0KCmZ1bmN0aW9uIC5kaWUKeyAjcHJpbnQgJiYgZXhpdAogICAgbG9jYWwgLWEgcG9zCiAgICBsb2NhbCByZXMgZXJyCgogICAgd2hpbGUgKCgkIykpOyBkbwogICAgICAgIGNhc2UgIiQxIiBpbgogICAgICAgIC1lKSAjIGVycm9yCiAgICAgICAgICAgIGVycj0idHJ1ZSIKICAgICAgICAgICAgOzsKICAgICAgICAqKQogICAgICAgICAgICBwb3MrPSgiJDEiKQogICAgICAgICAgICA7OwogICAgICAgIGVzYWMKICAgICAgICBzaGlmdAogICAgZG9uZQoKICAgIHJlcz0iJHtwb3NbKl19IgoKICAgIFsgIiRlcnIiID09IHRydWUgXSAmJiB7CiAgICAgICAgcDogLWUgIiRyZXMiICYmIGV4aXQgMQogICAgfSB8fCBlY2hvIC1lICIkcmVzIiAmJiBleGl0IDEKfQoKZnVuY3Rpb24gbWFpbjo6Y2hlY2stZGVwZW5kZW5jaWVzCnsKICAgIC50cmFjZSAiJEAiCgogICAgbG9jYWwgZGVwcyBiaW4KCiAgICBkZXBzPSgKICAgICAgICBiYXNoCiAgICAgICAgY2F0CiAgICAgICAgZGF0ZQogICAgICAgIGRpcm5hbWUKICAgICAgICBncmVwCiAgICAgICAgbWtkaXIKICAgICAgICByZWFscGF0aAogICAgICAgIHNlZAogICAgICAgIHNoYTI1NnN1bQogICAgKQoKICAgIGZvciBiaW4gaW4gIiR7ZGVwc1tAXX0iOyBkbwogICAgICAgIHA6IC14IGNoZWNraW5nIGRlcGVuZGVuY3k6ICRiaW4KICAgICAgICAhIGNvbW1hbmQgLXYgJGJpbiAmPi9kZXYvbnVsbCAmJgogICAgICAgICAgICAuZGllIC1lICRiaW4gbm90IGZvdW5kIFwKICAgICAgICAgICAgICAgICdcbiAgJy0gcGxlYXNlIGluc3RhbGwgYmVmb3JlIHByb2NlZWRpbmcKICAgIGRvbmUKCiAgICByZXR1cm4gMAp9CgpmdW5jdGlvbiBtYWluOjpsb2FkLWNvbmZpZwp7CiAgICAjIEBhcmcgICAgICA8Y29uZmlnX2ZpbGU+CgogICAgLnRyYWNlICIkQCIKCiAgICBbICEgLXIgIiQxIiAtbyAtZCAiJDEiIF0gJiYgewogICAgICAgIHA6IC13IGNhbm5vdCByZWFkIGNvbmZpZyBmaWxlOiAiJDEiCiAgICAgICAgcmV0dXJuIDEKICAgIH0KCiAgICBsb2NhbCAtYSB2YWxpZF9rZXlzIGxpbmVzCiAgICBsb2NhbCAtbCB2X2tleSBjX2tleSBrCiAgICBsb2NhbCBsaW5lIHYKCiAgICBsaW5lcz0oJChncmVwICdeW14jXScgIiQxIikpCiAgICB2YWxpZF9rZXlzPSgKICAgICAgICBiLnNyYwogICAgICAgIGIubmFtZQogICAgICAgIGIub3V0CiAgICAgICAgYi5uYW1lCiAgICAgICAgcy52ZXJzaW9uCiAgICAgICAgcy5saWJvbmx5CiAgICAgICAgcy5lcnJfbm9hcmdzCiAgICAgICAgcy5lcnJfaWxsZWdhbG9wdAogICAgKQoKICAgIGZvciB2X2tleSBpbiAiJHt2YWxpZF9rZXlzW0BdfSI7IGRvCiAgICAgICAgY19rZXk9IiR7dl9rZXklLip9WyR7dl9rZXkjKi59XSIKICAgICAgICB2PQogICAgICAgIGZvciBsaW5lIGluICIke2xpbmVzW0BdfSI7IGRvCiAgICAgICAgICAgIGs9IiQocDogLWsgIiRsaW5lIiAtZCA9KSIKCiAgICAgICAgICAgIFsgIiR2X2tleSIgPT0gIiRrIiBdICYmIHsKICAgICAgICAgICAgICAgIHY9IiQocDogLXYgIiRsaW5lIiAtZCA9KSIKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICBkb25lCgogICAgICAgIFsgLXogIiR2IiBdICYmIHsKICAgICAgICAgICAgWyAhIC16ICIke2NbJGNfa2V5XX0iIF0gJiYKICAgICAgICAgICAgICAgIHA6IC14ICInJHZfa2V5JyIgbm90IGZvdW5kLCB1c2luZyBkZWZhdWx0OiAiJHtjWyRjX2tleV19IgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KCiAgICAgICAgQ09ORklHWyRjX2tleV09IiR2IgogICAgZG9uZQoKICAgIHJldHVybiAwCn0KCmZ1bmN0aW9uIG1haW46OnBhcnNlLWFyZ3MKewogICAgLnRyYWNlICIkQCIKCiAgICBsb2NhbCAtbCBrZXkgb19rZXkKCiAgICBmb3Iga2V5IGluICIkeyFjW0BdfSI7IGRvCiAgICAgICAgX189IiR7a2V5Ly9cWy8ufSIKICAgICAgICBvX2tleT0iJHtfXy8vXF0vfSIKCiAgICAgICAgWyAhIC16ICIke29bJG9fa2V5XX0iIF0gJiYgewogICAgICAgICAgICBwOiAteCBvcHRpb24gcHJvdmlkZWQgLSBvdmVycmlkaW5nICIke2NbJGtleV19ID0+ICR7b1skb19rZXldfSIKICAgICAgICAgICAgQ09ORklHWyRrZXldPSIke29bJG9fa2V5XX0iCiAgICAgICAgfQogICAgICAgIFsgISAteiAiJHthWyRrZXldfSIgXSAmJiB7CiAgICAgICAgICAgIHA6IC14IGFyZyBwcm92aWRlZCAtIG92ZXJyaWRpbmcgIiR7Y1ska2V5XX0gPT4gJHthWyRrZXldfSIKICAgICAgICAgICAgQ09ORklHWyRrZXldPSIke2FbJGtleV19IgogICAgICAgIH0KICAgIGRvbmUKICAgIHVuc2V0IF9fCgogICAgcmV0dXJuIDAKfQoKZnVuY3Rpb24gbWFpbjo6c2Nhbi1zb3VyY2UKewogICAgIyBAYXJnICAgICAgPHNyY19kaXI+CgogICAgLnRyYWNlICIkQCIKCiAgICBbIC1kICIkMSIgXSB8fCBbIC1yICIkMSIgXSB8fCAuZGllIC1lIGNhbm5vdCBhY2Nlc3Mgc291cmNlIGRpcmVjdG9yeTogIiQxIgoKICAgIHNjYW4tc291cmNlOjptYWtlLWhlbHBkb2MoKQogICAgewogICAgICAgICMgQGFyZyAgICAgIDxzcmNfZmlsZT4KCiAgICAgICAgLnRyYWNlICIkQCIKCiAgICAgICAgbG9jYWwgbGluZSBkZXNjIHBhcmFtIGFyZyB1c2FnZQoKICAgICAgICBkZXNjPSgkKHNlZCAtbiAtZSAnL14jICpAZGVzYyAqLyB7cy8jICpAZGVzYyAqLy87IHA7fScgIiQxIikpCiAgICAgICAgKCgkeyNkZXNjW0BdfSkpICYmCiAgICAgICAgICAgIEhFTFBNQVBbJGZuXT0iJHtkZXNjWypdfSIgfHwKICAgICAgICAgICAgSEVMUE1BUFskZm5dPSItIgoKICAgICAgICB3aGlsZSBJRlM9IHJlYWQgLXJhIGxpbmU7IGRvCiAgICAgICAgICAgIF9fPSIkKHA6IC1rICIkbGluZSIgLWQgPSkiICYmCiAgICAgICAgICAgICAgICBwYXJhbSs9IiQocHJpbnRmICIgICUtMjBzJXMiIFwKICAgICAgICAgICAgICAgICAgICAiJHtfXy8vXCQvXFxcJH0iICIkKHA6IC12ICIkbGluZSIgLWQgPSlcbiIpIgogICAgICAgIGRvbmUgPDw8IiQoc2VkIC1uIC1lICcvXiMgKkBwYXJhbSAqLyB7cy8jICpAcGFyYW0gKi8vOyBwO30nICIkMSIpIgogICAgICAgIHVuc2V0IF9fCgogICAgICAgIFsgIiR7Y1tzW2xpYm9ubHldXX0iICE9IHRydWUgXSAmJgogICAgICAgICAgICB1c2FnZT0iXCR7MCMjKlwvfSAiCgogICAgICAgIHVzYWdlKz0iJHtmbi8vLi8gfSIKICAgICAgICBhcmc9KCQoc2VkIC1uIC1lICcvXiMgKkBhcmcgKi8ge3MvIyAqQGFyZyAqLy87IHA7fScgIiQxIikpCiAgICAgICAgWyAhIC16ICIkcGFyYW0iIF0gJiYKICAgICAgICAgICAgdXNhZ2UrPSIgW29wdGlvbnNdJHthcmc6KyAke2FyZ1sqXX19XG5vcHRpb25zOlxuJHBhcmFtIiB8fAogICAgICAgICAgICB1c2FnZSs9IiAke2FyZ1sqXX0iCgogICAgICAgIFJFU1tsaWJdKz0iJCgKICAgICAgICAgICAgY2F0IDw8RE9DCmNhc2UgIlwkMSIgaW4gXD8gfCAtaCB8IC0taGVscCkKY2F0IDw8RU9GCnVzYWdlOiAkdXNhZ2UKRU9GCmV4aXQgMAo7Owplc2FjXG4KRE9DCiAgICAgICAgKSIKICAgICAgICByZXR1cm4gMAogICAgfQoKICAgIHNjYW4tc291cmNlOjptYWtlLWxpYigpCiAgICB7CiAgICAgICAgIyBAYXJnICAgICAgPHNjb3BlZF9zcmNfZGlyPgoKICAgICAgICAudHJhY2UgIiRAIgoKICAgICAgICBsb2NhbCByX3BhdGggZmlsZQogICAgICAgIGxvY2FsIC1sIGJfcGF0aCBiX2RpciBwYXJ0cyBrIHYgc19rZXkgZl9rZXkgcF9rZXkgc3ViCiAgICAgICAgbG9jYWwgLWEgc2VlbgogICAgICAgIGxvY2FsIC1pIGkKCiAgICAgICAgcl9wYXRoPSIkKHJlYWxwYXRoICIkMSIpIgogICAgICAgIGJfcGF0aD0iJHtyX3BhdGgjIyoiJChkaXJuYW1lICIkc3JjIikiXC99IgoKICAgICAgICBbWyAkYl9wYXRoID09IConICcqIF1dICYmCiAgICAgICAgICAgIHA6IC13IGJhc2UgcGF0aCBjb250YWlucyBzcGFjZSB0aGF0IHdpbGwgYmUgcmVwbGFjZWQgd2l0aCAnIi0iJzogXAogICAgICAgICAgICAgICAgIiR7Yl9wYXRoJSVcLyp9L1wwMzNbMzFtJHtiX3BhdGgjKlwvfVwwMzNbMG0iCgogICAgICAgIHB1c2hkICIkcl9wYXRoIiA+L2Rldi9udWxsCgogICAgICAgIHdoaWxlIElGUz0gcmVhZCAtcmEgZmlsZTsgZG8KICAgICAgICAgICAgWyAhIC1yICIkZmlsZSIgXSAmJiBjb250aW51ZSAjIHNraXAgaW5hY2Nlc3NpYmxlCgogICAgICAgICAgICBfXz0iJChyZWFscGF0aCAiJGZpbGUiKSIKICAgICAgICAgICAgZm49IiQocDogLS1mbiAiJHtfXyMjKiRzY29wZVwvfSIpIgogICAgICAgICAgICBfXz0iJChkaXJuYW1lICIkX18iKSIKICAgICAgICAgICAgYl9kaXI9IiR7X18jIypcL30iICYmIHVuc2V0IF9fCgogICAgICAgICAgICBbICIke2JfZGlyfSIgPT0gcHVibGljIF0gJiYKICAgICAgICAgICAgICAgIFtbICEgIiAke01BSU5MSVNUW0BdfSAiID1+ICIgJGZuICIgXV0gJiYKICAgICAgICAgICAgICAgIE1BSU5MSVNUKz0oIiRmbiIpCgogICAgICAgICAgICBbIC1kICIkZmlsZSIgXSAmJiB7CiAgICAgICAgICAgICAgICBbICIkc2NvcGUiID09IHB1YmxpYyBdICYmIFsgIiR7Yl9kaXJ9IiAhPSBwdWJsaWMgXSAmJiB7CiAgICAgICAgICAgICAgICAgICAgc3ViPSIkKHA6IC0tZm4gIiRmaWxlIikiCiAgICAgICAgICAgICAgICAgICAgcF9rZXk9IiRzdWJbcHJlXSIKICAgICAgICAgICAgICAgICAgICBIRUxQTUFQWyRwX2tleV09IiR7Zm4lJS4kc3ViKn0iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzY2FuLXNvdXJjZTo6bWFrZS1saWIgIiRmaWxlIgogICAgICAgICAgICB9IHx8IHsKICAgICAgICAgICAgICAgIFsgLXogIiQoaGVhZCAtbjUgIiRmaWxlIikiIF0gJiYgY29udGludWUgIyBza2lwIGVtcHR5CgogICAgICAgICAgICAgICAgW1sgIiAke3NlZW5bQF19ICIgPX4gIiAkZm4gIiBdXSAmJgogICAgICAgICAgICAgICAgICAgIC5kaWUgLWUgZHVwbGljYXRlIGZ1bmN0aW9uIGZvdW5kIGJldHdlZW4gc2NvcGVzOiAiJGZuIgoKICAgICAgICAgICAgICAgIFJFU1tsaWJdKz0iZnVuY3Rpb24gJGZuIHtcbiIKCiAgICAgICAgICAgICAgICBbICIkc2NvcGUiID09IHB1YmxpYyBdICYmIHsKICAgICAgICAgICAgICAgICAgICBzY2FuLXNvdXJjZTo6bWFrZS1oZWxwZG9jICIkZmlsZSIKCiAgICAgICAgICAgICAgICAgICAgWyAiJHtiX2RpciwsfSIgIT0gcHVibGljIF0gJiYgewogICAgICAgICAgICAgICAgICAgICAgICBJRlM9Jy4nCiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWQgLXJhIHBhcnRzIDw8PCIkZm4iCiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2V0IElGUwoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICgoaSA9IDA7IGkgPCAkeyNwYXJ0c1tAXX0gLSAxOyBpKyspKTsgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGs9IiR7cGFydHNbaV19IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdj0iJHtwYXJ0c1tpICsgMV19IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc19rZXk9IiRrW3N1Yl0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmX2tleT0iJGtbZm5dIgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtbICEgJHtTVUJNQVBbJHNfa2V5XX0gPX4gIiR2ICIgXV0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbICEgLXogIiR2IiBdICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU1VCTUFQWyRzX2tleV0rPSIkdiAiICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSEVMUE1BUFskc19rZXldKz0iJHYgIgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsgIiQocDogLS1mbiAiJGJfZGlyIikiID09ICIkayIgXSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsgISAteiAiJGZuIiBdICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU1VCTUFQWyRmX2tleV0rPSIkZm4gIgogICAgICAgICAgICAgICAgICAgICAgICBkb25lCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgUkVTW2xpYl0rPSIkKGdyZXAgJ15bXiNdJyAiJGZpbGUiKVxufVxuIgogICAgICAgICAgICAgICAgc2Vlbis9KCIkZm4iKQogICAgICAgICAgICB9CiAgICAgICAgZG9uZSA8PDwiJChscykiCgogICAgICAgIHBvcGQgPi9kZXYvbnVsbAoKICAgICAgICByZXR1cm4gMAogICAgfQoKICAgIGxvY2FsIHNyYyBkZWNsYXJlcwogICAgbG9jYWwgLWwgZm4KCiAgICBmb3Igc2NvcGUgaW4gcHJpdmF0ZSBwdWJsaWM7IGRvCiAgICAgICAgc3JjPSIkMS8kc2NvcGUiCiAgICAgICAgWyAtZCAiJHNyYyIgXSAmJgogICAgICAgICAgICBzY2FuLXNvdXJjZTo6bWFrZS1saWIgIiRzcmMiCiAgICBkb25lCgogICAgWyAiJHtjW3NbbGlib25seV1dfSIgIT0gdHJ1ZSBdICYmIHsKICAgICAgICAjIG1vdmUgYWxsIGRlY2xhcmUgc3RhdGVtZW50cywgZXhjZXB0IGZvciB0aG9zZSB3aXRoIC1HCiAgICAgICAgZGVjbGFyZXM9J15kZWNsYXJlXHMqXC1bXkddXHMqLiokJwogICAgICAgIFJFU1t2YXJdPSIkKGVjaG8gLWUgIiR7cltsaWJdfSIgfCBncmVwIC1FICIkZGVjbGFyZXMiKSIKICAgICAgICBSRVNbbGliXT0iJChlY2hvIC1lICIke3JbbGliXX0iIHwgZ3JlcCAtdkUgIiRkZWNsYXJlcyIpXG4iCiAgICB9CgogICAgcmV0dXJuIDAKfQoKZnVuY3Rpb24gbWFpbjo6bWFrZS1leGVjCnsKICAgIC50cmFjZSAiJEAiCgogICAgbG9jYWwgLWwgcyBtIGNtZCBzdWIgb3B0IGZuIHNfa2V5IGZfa2V5IGhfa2V5IHBfa2V5CiAgICBsb2NhbCAtYSBzZWVuX2ZuIHNlZW5fb3B0IHNlZW5fc3ViCiAgICBsb2NhbCBoX29wdCB2X29wdCBvcHRpb25zIGhlbHAKCiAgICBoX29wdD0iJChwcmludGYgIiAgJS0yMHMlc1xuIiAiLWgsLS1oZWxwIiAicHJpbnQgdGhpcyBoZWxwIG1lc3NhZ2UiKSIKICAgIHZfb3B0PSIkKHByaW50ZiAiICAlLTIwcyVzXG4iICItdiwtLXZlcnNpb24iIFwKICAgICAgICAicHJpbnQgdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiB0aGlzIGV4ZWN1dGFibGUiKSIKCiAgICBmb3IgcyBpbiAiJHshU1VCTUFQW0BdfSI7IGRvCiAgICAgICAgc3ViPSIke3MlWyp9IgogICAgICAgIHNfa2V5PSIkc3ViW3N1Yl0iCiAgICAgICAgZl9rZXk9IiRzdWJbZm5dIgogICAgICAgIHBfa2V5PSIkc3ViW3ByZV0iCiAgICAgICAgb3B0aW9ucz0KICAgICAgICBoZWxwPQoKICAgICAgICB3aGlsZSBJRlM9IHJlYWQgLXJhIG9wdDsgZG8KICAgICAgICAgICAgd2hpbGUgSUZTPSByZWFkIC1yYSBmbjsgZG8KICAgICAgICAgICAgICAgICMgbmVzdGVkIGZ1bmN0aW9ucwogICAgICAgICAgICAgICAgWyAiJHtmbiMjKi59IiA9PSAiJG9wdCIgXSAmJgogICAgICAgICAgICAgICAgICAgIFtbICEgIiAke3NlZW5fZm5bQF19ICIgPX4gIiAkZm4gIiBdXSAmJiB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucys9IiRvcHQpIHNoaWZ0ICYmICRmbiBcIlwkQFwiOyBleGl0IFwkPyA7O1xuIgogICAgICAgICAgICAgICAgICAgIGhlbHArPSIkKHByaW50ZiAiICAlLTIwcyVzXG4iIFwKICAgICAgICAgICAgICAgICAgICAgICAgIiRvcHQiICIke0hFTFBNQVBbJGZuXX1cbiIpIgogICAgICAgICAgICAgICAgICAgIHNlZW5fZm4rPSgiJGZuIikKICAgICAgICAgICAgICAgICAgICBzZWVuX29wdCs9KCIkb3B0IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgZG9uZSA8PDwiJChlY2hvIC1lICIke1NVQk1BUFskZl9rZXldLy9cIC9cXG59IikiCgogICAgICAgICAgICAjIG5lc3RlZCBzdWItbW9kdWxlcwogICAgICAgICAgICBbWyAhICIgJHtzZWVuX29wdFtAXX0gIiA9fiAiICRvcHQgIiBdXSAmJiB7CiAgICAgICAgICAgICAgICBoX2tleT0iJG9wdFtzdWJdIgogICAgICAgICAgICAgICAgb3B0aW9ucys9IiRvcHQpIHNoaWZ0ICYmICRvcHQgXCJcJEBcIjsgZXhpdCBcJD8gOztcbiIKICAgICAgICAgICAgICAgIGhlbHArPSIkKHByaW50ZiAiICAlLTIwcyVzXG4iIFwKICAgICAgICAgICAgICAgICAgICAiJG9wdCIgInskKGVjaG8gLWUgIiR7SEVMUE1BUFskaF9rZXldLy9cIC8sXCB9IiB8CiAgICAgICAgICAgICAgICAgICAgICAgIHNlZCAncy8sXCAqJC8vJyl9XG4iKSIKICAgICAgICAgICAgICAgIHNlZW5fb3B0Kz0oIiRvcHQiKQogICAgICAgICAgICB9CiAgICAgICAgZG9uZSA8PDwiJChlY2hvIC1lICIke1NVQk1BUFskc19rZXldLy9cIC9cXG59IikiCgogICAgICAgIFtbICEgIiAke3NlZW5fc3ViW0BdfSAiID1+ICIgJHN1YiAiIF1dICYmIHsKICAgICAgICAgICAgWyAhIC16ICIke0hFTFBNQVBbJHBfa2V5XX0iIF0gJiYgewogICAgICAgICAgICAgICAgY21kPSIke0hFTFBNQVBbJHBfa2V5XS8vLi9cIH0gJHN1YiIKICAgICAgICAgICAgfSB8fCBjbWQ9IiRzdWIiCgogICAgICAgICAgICBSRVNbYmluXSs9IiQoCiAgICAgICAgICAgICAgICBjYXQgPDxET0MKJHN1YigpIHsKJCgKICAgICAgICAgICAgICAgICAgICBbICIke2Nbc1tlcnJfbm9hcmdzXV19IiA9PSB0cnVlIF0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgY2F0IDw8RE9DQwooKCFcJCMpKSAmJiB7CmVjaG8gbm8gYXJndW1lbnRzIHByb3ZpZGVkCmVjaG8gcHJpbnQgaGVscCB3aXRoICJcJHswIyMqXC99IiAkY21kIC0taGVscApleGl0IDEKfQpET0NDCiAgICAgICAgICAgICAgICApCndoaWxlICgoXCQjKSk7IGRvCmNhc2UgIlwkMSIgaW4KXD8gfCAtaCB8IC0taGVscCkKY2F0IDw8RU9GCnVzYWdlOiBcJHswIyMqXC99ICRjbWQgW29wdGlvbnNdCm9wdGlvbnM6CiRoZWxwCiRoX29wdApFT0YKZXhpdCAwCjs7CiRvcHRpb25zCiQoCiAgICAgICAgICAgICAgICAgICAgWyAiJHtjW3NbZXJyX2lsbGVnYWxvcHRdXX0iID09IHRydWUgXSAmJgogICAgICAgICAgICAgICAgICAgICAgICBjYXQgPDxET0NDCiopIGVjaG8gaWxsZWdhbCBvcHRpb246ICInXCQxJyIgJiYgZXhpdCAxIDs7CkRPQ0MKICAgICAgICAgICAgICAgICkKCmVzYWMKc2hpZnQKZG9uZQp9XG4KRE9DCiAgICAgICAgICAgICkiCiAgICAgICAgICAgIHNlZW5fc3ViKz0oIiRzdWIiKQogICAgICAgIH0KICAgIGRvbmUKICAgIHVuc2V0IG9wdGlvbnMgaGVscCBoX2tleQoKICAgIGZvciBtIGluICIke01BSU5MSVNUW0BdfSI7IGRvCiAgICAgICAgaF9rZXk9IiRtW3N1Yl0iCiAgICAgICAgb3B0aW9ucys9IiRtKSBzaGlmdCAmJiAkbSBcIlwkQFwiOyBleGl0IFwkPzs7XG4iCiAgICAgICAgWyAhIC16ICIke0hFTFBNQVBbJGhfa2V5XX0iIF0gJiYgewogICAgICAgICAgICBoZWxwKz0iJChwcmludGYgIiAgJS0yMHMlc1xuIiBcCiAgICAgICAgICAgICAgICAiJG0iICJ7JChlY2hvIC1lICIke0hFTFBNQVBbJGhfa2V5XS8vXCAvLFwgfSIgfAogICAgICAgICAgICAgICAgICAgIHNlZCAncy8sXCAqJC8vJyl9XG4iKSIKICAgICAgICB9IHx8IGhlbHArPSIkKHByaW50ZiAiICAlLTIwcyVzXG4iICIkbSIgIiR7SEVMUE1BUFskbV19XG4iKSIKICAgIGRvbmUKCiAgICBSRVNbYmluXSs9IiQoCiAgICAgICAgY2F0IDw8RE9DCiQoCiAgICAgICAgICAgIFsgIiR7Y1tzW2Vycl9ub2FyZ3NdXX0iID09IHRydWUgXSAmJgogICAgICAgICAgICAgICAgY2F0IDw8RE9DQwooKCFcJCMpKSAmJiB7CmVjaG8gbm8gYXJndW1lbnRzIHByb3ZpZGVkCmVjaG8gcHJpbnQgaGVscCB3aXRoICJcJHswIyMqXC99IiAtLWhlbHAKZXhpdCAxCn0KRE9DQwogICAgICAgICkKX19WRVJTSU9OX189IiR7Y1tzW3ZlcnNpb25dXX0iCiR7clt2YXJdfQp3aGlsZSAoKFwkIykpOyBkbwpjYXNlICJcJDEiIGluClw/IHwgLWggfCAtLWhlbHApCmNhdCA8PEVPRgp1c2FnZTogXCR7MCMjKlwvfSBbb3B0aW9uc10Kb3B0aW9uczoKJGhlbHAKJHZfb3B0CiRoX29wdApFT0YKZXhpdCAwCjs7Ci12IHwgLS12ZXJzaW9uKQplY2hvICJcJF9fVkVSU0lPTl9fIgpleGl0IDAKOzsKJG9wdGlvbnMKJCgKICAgICAgICAgICAgWyAiJHtjW3NbZXJyX2lsbGVnYWxvcHRdXX0iID09IHRydWUgXSAmJgogICAgICAgICAgICAgICAgY2F0IDw8RE9DQwoqKSBlY2hvIGlsbGVnYWwgb3B0aW9uOiAiJ1wkMSciICYmIGV4aXQgMSA7OwpET0NDCiAgICAgICAgKQoKZXNhYwpzaGlmdApkb25lCmV4aXQgMApET0MKICAgICkiCgogICAgcmV0dXJuIDAKfQoKIyBtYWluCmRlY2xhcmUgLUEgQVJHIE9QVCBDT05GSUcgUkVTIFNVQk1BUCBIRUxQTUFQCmRlY2xhcmUgLWEgTUFJTkxJU1QKZGVjbGFyZSAtbiBjPUNPTkZJRyByPVJFUyBhPUFSRyBvPU9QVApfX0JVTlNIX1ZFUlNJT05fXz0xLjIuMApfXz0KCndoaWxlICgoJCMpKTsgZG8KICAgIGNhc2UgIiQxIiBpbgogICAgLXYgfCAtLXZlcnNpb24pCiAgICAgICAgZWNobyAiJF9fQlVOU0hfVkVSU0lPTl9fIgogICAgICAgIGV4aXQgMAogICAgICAgIDs7CiAgICAtYyB8IC0tY29uZmlnKQogICAgICAgIFsgLXogIiQyIiBdICYmIC5kaWUgbm8gdmFsdWUgcHJvdmlkZWQ6ICIkMSA/IgogICAgICAgIEFSR1tjXT0iJDIiCiAgICAgICAgc2hpZnQKICAgICAgICA7OwogICAgLXMgfCAtLXNyYykKICAgICAgICBbIC16ICIkMiIgXSAmJiAuZGllIG5vIHZhbHVlIHByb3ZpZGVkOiAiJDEgPyIKICAgICAgICBBUkdbYltzcmNdXT0iJDIiCiAgICAgICAgc2hpZnQKICAgICAgICA7OwogICAgLW8gfCAtLW91dCkKICAgICAgICBbIC16ICIkMiIgXSAmJiAuZGllIG5vIHZhbHVlIHByb3ZpZGVkOiAiJDEgPyIKICAgICAgICBBUkdbYltvdXRdXT0iJDIiCiAgICAgICAgc2hpZnQKICAgICAgICA7OwogICAgLW4gfCAtLW5hbWUpCiAgICAgICAgWyAteiAiJDIiIF0gJiYgLmRpZSBubyB2YWx1ZSBwcm92aWRlZDogIiQxID8iCiAgICAgICAgQVJHW2JbbmFtZV1dPSIkMiIKICAgICAgICBzaGlmdAogICAgICAgIDs7CiAgICAtLW9wdCB8IC0tb3B0aW9uKQogICAgICAgIFsgLXogIiQyIiBdICYmIC5kaWUgbm8gdmFsdWUgcHJvdmlkZWQ6ICIkMSA/IgogICAgICAgIGs9IiQocDogLWsgIiQyIiAtZCA9KSIKICAgICAgICB2PSIkKHA6IC12ICIkMiIgLWQgPSkiCiAgICAgICAgWyAteiAiJHYiIF0gJiYgLmRpZSBubyB2YWx1ZSBwcm92aWRlZDogIiRrID8iCiAgICAgICAgT1BUWyIkayJdPSIkdiIKICAgICAgICB1bnNldCBrIHYKICAgICAgICBzaGlmdAogICAgICAgIDs7CiAgICAtZCB8IC0tZHJ5LXJ1bikKICAgICAgICBBUkdbZF09dHJ1ZQogICAgICAgIDs7CiAgICAtcSB8IC0tcXVpZXQpCiAgICAgICAgZXhlYyA+L2Rldi9udWxsIDI+JjEKICAgICAgICA7OwogICAgLXggfCAteHggfCAtLXZlcmJvc2UpCiAgICAgICAgWyAiJHsxIyotfSIgPT0geHggXSAmJiBBUkdbeHhdPXRydWUKICAgICAgICBBUkdbeF09dHJ1ZQogICAgICAgIDs7CiAgICBcPyB8IC1oIHwgLS1oZWxwKQogICAgICAgIGNhdCA8PEVPRgoke19fTUFJTl9fIyMqXC99Cm9wdGlvbnM6CiAgLWMsLS1jb25maWcgPGZpbGU+ICBzcGVjaWZ5IGEgY29uZmlnIGZpbGUgdG8gcmVhZCBmcm9tCiAgLXMsLS1zcmMgPHBhdGg+ICAgICBzcGVjaWZ5IGEgc291cmNlIGRpcmVjdG9yeSB0byByZWFkIGZyb20KICAtbywtLW91dCA8cGF0aD4gICAgIHNwZWNpZnkgYW4gb3V0cHV0IGRpcmVjdG9yeSB0byBwbGFjZSB0aGUgYnVuZGxlCiAgLW4sLS1uYW1lIDx2YWw+ICAgICBzcGVjaWZ5IGEgbmFtZSBmb3IgdGhlIGJ1bmRsZQogIC0tb3B0IDxrZXk+PTx2YWw+ICAgc3BlY2lmeSBhZGRpdGlvbmFsIGNvbmZpZyBvcHRpb24KICAtZCwtLWRyeS1ydW4gICAgICAgIGRvIG5vdCB3cml0ZSBidW5kbGUgdG8gZmlsZSwgcHJpbnQgdG8gY29uc29sZQogIC1xLC0tcXVpZXQgICAgICAgICAgc3VwcHJlc3MgYWxsIG91dHB1dCB0byBjb25zb2xlCiAgLXgsLXh4LC0tdmVyYm9zZSAgICBwcmludCB2ZXJib3NlIG91dHB1dCB0byB0aGUgY29uc29sZQogIC1oLC0taGVscCAgICAgICAgICAgcHJpbnQgdGhpcyBoZWxwIG1lc3NhZ2UKICAtdiwtLXZlcnNpb24gICAgICAgIHByaW50IHZlcnNpb24KRU9GCiAgICAgICAgZXhpdCAwCiAgICAgICAgOzsKICAgICopCiAgICAgICAgZWNobyBpbGxlZ2FsIG9wdGlvbjogIiQxIgogICAgICAgIGV4aXQgMQogICAgICAgIDs7CiAgICBlc2FjCiAgICBzaGlmdApkb25lCgptYWluOjpjaGVjay1kZXBlbmRlbmNpZXMKCiMgZGVmYXVsdHMKQ09ORklHW2Jbc3JjXV09Li9zcmMKQ09ORklHW2Jbb3V0XV09Li9vdXQKQ09ORklHW2JbbmFtZV1dPWJ1bmRsZWQKQ09ORklHW3NbdmVyc2lvbl1dPTAuMS4wCkNPTkZJR1tzW2xpYm9ubHldXT1mYWxzZQpDT05GSUdbc1tlcnJfbm9hcmdzXV09ZmFsc2UKQ09ORklHW3NbZXJyX2lsbGVnYWxvcHRdXT1mYWxzZQoKWyAhIC16ICIke2FbY119IiBdICYmCiAgICBtYWluOjpsb2FkLWNvbmZpZyAiJHthW2NdfSIgfHwKICAgIG1haW46OmxvYWQtY29uZmlnICIkUFdEL2J1bnNoLmNvbmZpZyIgfHwKICAgIHA6IC14IG5vIGNvbmZpZyBmaWxlIGxvYWRlZCAtIGZhbGxpbmcgYmFjayB0byBkZWZhdWx0cyBhbmQgYXJndW1lbnRzCgptYWluOjpwYXJzZS1hcmdzCm1haW46OnNjYW4tc291cmNlICIke2NbYltzcmNdXX0iCgpbICIke2Nbc1tsaWJvbmx5XV19IiA9PSB0cnVlIF0gJiYgewogICAgcDogLXggY3JlYXRpbmcgbGlicmFyeSBPTkxZCiAgICBSRVNbbGliXT0iJChlY2hvIC1lICIke3JbbGliXX0iIHwgc2VkICdzL2V4aXQvcmV0dXJuL2cnKSIKfSB8fCBtYWluOjptYWtlLWV4ZWMKClJFU1tib2R5XT0iJCgKICAgIGNhdCA8PERPQwojIS91c3IvYmluL2VudiBiYXNoCiMgYnVuZGxlZCB3aXRoIGJ1bnNoIC0gaHR0cHM6Ly9naXRodWIuY29tL0thbWFyYW5ML2J1bnNoCiR7cltsaWJdfQoke3JbYmluXX0KRE9DCikiCgpbICIke2FbZF19IiA9PSB0cnVlIF0gJiYgewogICAgZWNobyAtZSAiJHtyW2JvZHldfSIgfCBncmVwIC12ICdeJCcKfSB8fCB7CiAgICBbICIke2NbYltuYW1lXV19IiA9PSBidW5kbGVkIF0gJiYgewogICAgICAgIF9fPSIkKHNoYTI1NnN1bSA8PDwiJHtyW2JvZHldfSIpIgogICAgICAgIF9fPSIke19fJVwgXCAqfSIKICAgICAgICBDT05GSUdbYltuYW1lXV0rPS0iJHtfXzogLTh9IgogICAgICAgIHVuc2V0IF9fCiAgICB9CgogICAgcDogLXggd3JpdGluZyBmaWxlOiAiJHtjW2Jbb3V0XV19LyR7Y1tiW25hbWVdXX0iCgogICAgWyAhIC1kICIke2NbYltvdXRdXX0iIF0gJiYgbWtkaXIgLXAgIiR7Y1tiW291dF1dfSIKICAgIGVjaG8gLWUgIiR7cltib2R5XX0iIHwgZ3JlcCAtdiAnXiQnID4iJHtjW2Jbb3V0XV19LyR7Y1tiW25hbWVdXX0iCgogICAgWyAhIC16ICIkKGNhdCAke2NbYltvdXRdXX0vJHtjW2JbbmFtZV1dfSkiIF0gJiYgewogICAgICAgIGNobW9kICt4ICIke2NbYltvdXRdXX0vJHtjW2JbbmFtZV1dfSIKICAgICAgICBlY2hvICJbICQoZGF0ZSArIiVZLSVtLSVkICVIOiVNOiVTIikgXSIgXAogICAgICAgICAgICAiJHtjW2JbbmFtZV1dfSAodiR7Y1tzW3ZlcnNpb25dXX0pIiAiPT4iIFwKICAgICAgICAgICAgIiQocmVhbHBhdGggJHtjW2Jbb3V0XV19LyR7Y1tiW25hbWVdXX0pIgoKICAgICAgICBwOiAteCBzdGFydCB1c2luZyAiJyR7Y1tiW25hbWVdXX0nIiB3aXRoIG9uZSBvZiB0aGUgZm9sbG93aW5nIFwKICAgICAgICAgICAgb3B0aW9uczonXG4gICAnIFwKICAgICAgICAgICAgLSBhcHBlbmQgdGhlIGZvbGxvd2luZyB0byB5b3VyICd+Ly5iYXNoX3Byb2ZpbGUnOiBcCiAgICAgICAgICAgICJleHBvcnQgUEFUSD1cJFBBVEg6JChyZWFscGF0aCAke2NbYltvdXRdXX0pXG4gICAiIFwKICAgICAgICAgICAgLSBjcmVhdGUgYSBzeW1ib2xpYyBsaW5rIGJ5IGV4ZWN1dGluZzogJ3N1ZG8gbG4gLXMnIFwKICAgICAgICAgICAgIiQocmVhbHBhdGggJHtjW2Jbb3V0XV19LyR7Y1tiW25hbWVdXX0pIiBcCiAgICAgICAgICAgICIvdXNyL2Jpbi8ke2NbYltuYW1lXV19IgogICAgfSB8fCAuZGllIC1lIGNvdWxkIG5vdCB3cml0ZSBmaWxlOiAiJHtjW2Jbb3V0XV19LyR7Y1tiW25hbWVdXX0iCn0KCnA6IC1hIC14IENPTkZJRwoKZXhpdCAwCg=='
__MAIN__="${0##*\/}" \
/usr/bin/env bash <(base64 -d <<<"$MAIN") "$@"
exit $?
