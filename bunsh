#!/bin/bash
# 581d22a1cdc809ae93f28955a6100f3914ae1f2b9d55fdcc464cc40a5e878e56
MAIN='IyEvdXNyL2Jpbi9lbnYgYmFzaAoKKCgke0JBU0hfVkVSU0lPTjo6MX0gPCA0KSkgJiYgewogICAgZWNobyAtZSAiXDAzM1sxbUVSUk9SXDAzM1swbVx0JHtfX01BSU5fX30gcmVxdWlyZXMgYmFzaCA+PTQueCIKICAgIGV4aXQgMQp9CgpmdW5jdGlvbiBwOgp7ICMgcHJpbnQKICAgICgoJCMgPT0gMCkpICYmIHJldHVybiAxCgogICAgcDo6YSgpCiAgICB7ICMgYXJyYXkKICAgICAgICAjQHBhcmFtICAgICAkMT1hcnJheSBuYW1lCgogICAgICAgIGxvY2FsIGsKICAgICAgICBsb2NhbCAtbiBhcnJheT0iJDEiCgogICAgICAgIHJlcys9IiRwcmUkMT0oXG4iCiAgICAgICAgZm9yIGsgaW4gIiR7IWFycmF5W0BdfSI7IGRvCiAgICAgICAgICAgIHJlcys9IiQoCiAgICAgICAgICAgICAgICBwcmludGYgIiUuMHMgIiB7MS4uNH0gJiYKICAgICAgICAgICAgICAgICAgICBwcmludGYgIiR7a309JHthcnJheVska119JXMiICJcbiIKICAgICAgICAgICAgKSIKICAgICAgICBkb25lCiAgICAgICAgcmVzKz0iJHByZSlcbiIKCiAgICAgICAgcmV0dXJuIDAKICAgIH0KCiAgICBwOjprdnAoKQogICAgeyAjIGtleS12YWx1ZSBwYWlyCiAgICAgICAgbG9jYWwgLUEgYXJnCiAgICAgICAgbG9jYWwgLWEgcG9zCiAgICAgICAgbG9jYWwgcmVzCgogICAgICAgIHdoaWxlICgoJCMgPiAwKSk7IGRvCiAgICAgICAgICAgIGNhc2UgIiQxIiBpbgogICAgICAgICAgICAtZCkgIyBkZWxpbWl0ZXIKICAgICAgICAgICAgICAgIFsgISAteiAiJDIiIF0gJiYKICAgICAgICAgICAgICAgICAgICBhcmdbZF09IiQyIiAmJiBzaGlmdAogICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgLWspICMga2V5CiAgICAgICAgICAgICAgICBhcmdba109dHJ1ZQogICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgLXYpICMgdmFsdWUKICAgICAgICAgICAgICAgIGFyZ1t2XT10cnVlCiAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAqKSAjIHBvc2l0aW9uYWxzCiAgICAgICAgICAgICAgICBwb3MrPSgiJDEiKQogICAgICAgICAgICAgICAgOzsKICAgICAgICAgICAgZXNhYwogICAgICAgICAgICBzaGlmdAogICAgICAgIGRvbmUKICAgICAgICAoKCR7I3Bvc1tAXX0gPCAxKSkgJiYgcmV0dXJuIDEKCiAgICAgICAgWyAteiAiJHthcmdbZF19IiBdICYmIGFyZ1tkXT0nICcKICAgICAgICBJRlM9IiR7YXJnW2RdfSIKICAgICAgICByZWFkIC1yYSByZXMgPDw8IiR7cG9zW0BdfSIKICAgICAgICB1bnNldCBJRlMKCiAgICAgICAgaWYgWyAiJHthcmdba119IiA9PSB0cnVlIF07IHRoZW4KICAgICAgICAgICAgWyAteiAiJHtyZXNbMF19IiBdICYmIHJldHVybiAxCiAgICAgICAgICAgIGVjaG8gLWUgIiR7cmVzWzBdfSIgJiYgcmV0dXJuIDAKICAgICAgICBlbGlmIFsgIiR7YXJnW3ZdfSIgPT0gdHJ1ZSBdOyB0aGVuCiAgICAgICAgICAgIFsgLXogIiR7cmVzWzFdfSIgXSAmJiByZXR1cm4gMQogICAgICAgICAgICBlY2hvIC1lICIke3Jlc1sxXX0iICYmIHJldHVybiAwCiAgICAgICAgZmkKICAgIH0KCiAgICBsb2NhbCAtQSBhcmcKICAgIGxvY2FsIC1hIHBvcwogICAgbG9jYWwgcmVzIHByZQoKICAgIHdoaWxlICgoJCMgPiAwKSk7IGRvCiAgICAgICAgY2FzZSAiJDEiIGluCiAgICAgICAgLWEpICMgYXJyYXkKICAgICAgICAgICAgYXJnW2FdPXRydWUKICAgICAgICAgICAgOzsKICAgICAgICAtZSkgIyBlcnJvcgogICAgICAgICAgICBhcmdbZV09dHJ1ZQogICAgICAgICAgICA7OwogICAgICAgIC0tZm4pICMgZnVuY3Rpb24gbmFtZSBmb3JtYXQKICAgICAgICAgICAgWyAteiAiJDIiIF0gJiYgcmV0dXJuIDEKICAgICAgICAgICAgcmVzPSIkezIvL1wgLy19IiAmJiByZXM9IiR7cmVzLy9cLy8ufSIKICAgICAgICAgICAgZWNobyAtZSAiJHtyZXMsLH0iICYmIHJldHVybiAwCiAgICAgICAgICAgIDs7CiAgICAgICAgLWsgfCAtdikgIyBrZXkgfCB2YWx1ZQogICAgICAgICAgICBwOjprdnAgIiRAIgogICAgICAgICAgICByZXR1cm4gJD8KICAgICAgICAgICAgOzsKICAgICAgICAtdykgIyB3YXJuCiAgICAgICAgICAgIGFyZ1t3XT10cnVlCiAgICAgICAgICAgIDs7CiAgICAgICAgLXgpICMgdmVyYm9zZS90ZXN0CiAgICAgICAgICAgIGFyZ1t4XT10cnVlCiAgICAgICAgICAgIDs7CiAgICAgICAgKikgIyBwb3NpdGlvbmFscwogICAgICAgICAgICBwb3MrPSgiJDEiKQogICAgICAgICAgICA7OwogICAgICAgIGVzYWMKICAgICAgICBzaGlmdAogICAgZG9uZQogICAgKCgkeyNwb3NbQF19IDwgMSkpICYmIHJldHVybiAxCgogICAgWyAiJHthcmdbeF19IiA9PSB0cnVlIF0gJiYgewogICAgICAgIFsgIiR7YVt4XX0iID09IHRydWUgXSAmJiB7CiAgICAgICAgICAgIHByZT0iIyMjICIKICAgICAgICB9IHx8IHJldHVybiAwCiAgICB9CgogICAgWyAiJHthcmdbYV19IiA9PSB0cnVlIF0gJiYgewogICAgICAgIGZvciBhcnIgaW4gIiR7cG9zW0BdfSI7IGRvCiAgICAgICAgICAgIHA6OmEgIiRhcnIiCiAgICAgICAgZG9uZQogICAgICAgIGVjaG8gLWUgIiRyZXMiICYmIHJldHVybiAwCiAgICB9IHx8IHJlcz0iJHtwb3NbKl19IgoKICAgIGlmIFsgIiR7YXJnW3ddfSIgPT0gdHJ1ZSBdOyB0aGVuCiAgICAgICAgcHJlPSJcMDMzWzFtV0FSTlwwMzNbMG1cdCIKICAgIGVsaWYgWyAiJHthcmdbZV19IiA9PSB0cnVlIF07IHRoZW4KICAgICAgICBwcmU9IlwwMzNbMW1FUlJPUlwwMzNbMG1cdCIKICAgIGZpCgogICAgZWNobyAtZSAiJHByZSRyZXMiCiAgICByZXR1cm4gMAp9CgpmdW5jdGlvbiAudHJhY2UKeyAjcHJpbnQgKHZvaWQtb25seSkgY2FsbGVyIGZ1bmN0aW9uCiAgICBbICIke2FbeHhdfSIgIT0gdHJ1ZSBdICYmIHJldHVybiAxCiAgICBwOiAteCBpbnZva2luZyAiJHtGVU5DTkFNRVsxXX0oJCopIiAmJiByZXR1cm4gMAp9CgpmdW5jdGlvbiAuZGllCnsgI3ByaW50ICYmIGV4aXQKICAgIGxvY2FsIC1hIHBvcwogICAgbG9jYWwgcmVzIGVycgoKICAgIHdoaWxlICgoJCMgPiAwKSk7IGRvCiAgICAgICAgY2FzZSAiJDEiIGluCiAgICAgICAgLWUpICMgZXJyb3IKICAgICAgICAgICAgZXJyPSJ0cnVlIgogICAgICAgICAgICA7OwogICAgICAgICopCiAgICAgICAgICAgIHBvcys9KCIkMSIpCiAgICAgICAgICAgIDs7CiAgICAgICAgZXNhYwogICAgICAgIHNoaWZ0CiAgICBkb25lCgogICAgcmVzPSIke3Bvc1sqXX0iCgogICAgWyAiJGVyciIgPT0gdHJ1ZSBdICYmIHsKICAgICAgICBwOiAtZSAiJHJlcyIgJiYgZXhpdCAxCiAgICB9IHx8IGVjaG8gLWUgIiRyZXMiICYmIGV4aXQgMQp9CgpmdW5jdGlvbiBtYWluOjpjaGVjay1kZXBlbmRlbmNpZXMKewogICAgLnRyYWNlICIkQCIKCiAgICBsb2NhbCBkZXBzIGJpbgoKICAgIGRlcHM9KAogICAgICAgIGJhc2gKICAgICAgICBjYXQKICAgICAgICBkYXRlCiAgICAgICAgZGlybmFtZQogICAgICAgIGdyZXAKICAgICAgICBta2RpcgogICAgICAgIHJlYWxwYXRoCiAgICAgICAgc2VkCiAgICAgICAgc2hhMjU2c3VtCiAgICApCgogICAgZm9yIGJpbiBpbiAiJHtkZXBzW0BdfSI7IGRvCiAgICAgICAgcDogLXggY2hlY2tpbmcgZGVwZW5kZW5jeTogJGJpbgogICAgICAgICEgY29tbWFuZCAtdiAkYmluICY+L2Rldi9udWxsICYmCiAgICAgICAgICAgIC5kaWUgLWUgJGJpbiBub3QgZm91bmQgXAogICAgICAgICAgICAgICAgJ1xuICAnLSBwbGVhc2UgaW5zdGFsbCBiZWZvcmUgcHJvY2VlZGluZwogICAgZG9uZQoKICAgIHJldHVybiAwCn0KCmZ1bmN0aW9uIG1haW46OmxvYWQtY29uZmlnCnsKICAgICNAcGFyYW0gICAgICQxPXBhdGggdG8gY29uZmlnIGZpbGUKCiAgICAudHJhY2UgIiRAIgoKICAgIFsgISAtciAiJDEiIC1vIC1kICIkMSIgXSAmJiB7CiAgICAgICAgcDogLXcgY2Fubm90IHJlYWQgY29uZmlnIGZpbGU6ICIkMSIKICAgICAgICByZXR1cm4gMQogICAgfQoKICAgIGxvY2FsIC1hIHZhbGlkX2tleXMgbGluZXMKICAgIGxvY2FsIC1sIHZfa2V5IGNfa2V5IGsKICAgIGxvY2FsIGxpbmUgdgoKICAgIGxpbmVzPSgkKGdyZXAgJ15bXiNdJyAiJDEiKSkKICAgIHZhbGlkX2tleXM9KAogICAgICAgIGIuc3JjCiAgICAgICAgYi5uYW1lCiAgICAgICAgYi5vdXQKICAgICAgICBiLm5hbWUKICAgICAgICBzLnZlcnNpb24KICAgICAgICBzLmxpYm9ubHkKICAgICAgICBzLmVycl9ub2FyZ3MKICAgICAgICBzLmVycl9pbGxlZ2Fsb3B0CiAgICApCgogICAgZm9yIHZfa2V5IGluICIke3ZhbGlkX2tleXNbQF19IjsgZG8KICAgICAgICBjX2tleT0iJHt2X2tleSUuKn1bJHt2X2tleSMqLn1dIgogICAgICAgIHY9CiAgICAgICAgZm9yIGxpbmUgaW4gIiR7bGluZXNbQF19IjsgZG8KICAgICAgICAgICAgaz0iJChwOiAtayAiJGxpbmUiIC1kID0pIgoKICAgICAgICAgICAgWyAiJHZfa2V5IiA9PSAiJGsiIF0gJiYgewogICAgICAgICAgICAgICAgdj0iJChwOiAtdiAiJGxpbmUiIC1kID0pIgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgIGRvbmUKCiAgICAgICAgWyAteiAiJHYiIF0gJiYgewogICAgICAgICAgICBbICEgLXogIiR7Y1skY19rZXldfSIgXSAmJgogICAgICAgICAgICAgICAgcDogLXggIickdl9rZXknIiBub3QgZm91bmQsIHVzaW5nIGRlZmF1bHQ6ICIke2NbJGNfa2V5XX0iCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgfQoKICAgICAgICBDT05GSUdbJGNfa2V5XT0iJHYiCiAgICBkb25lCgogICAgcmV0dXJuIDAKfQoKZnVuY3Rpb24gbWFpbjo6cGFyc2UtYXJncwp7CiAgICAudHJhY2UgIiRAIgoKICAgIGxvY2FsIC1sIGtleSBvX2tleQoKICAgIGZvciBrZXkgaW4gIiR7IWNbQF19IjsgZG8KICAgICAgICBfXz0iJHtrZXkvL1xbLy59IgogICAgICAgIG9fa2V5PSIke19fLy9cXS99IgoKICAgICAgICBbICEgLXogIiR7b1skb19rZXldfSIgXSAmJiB7CiAgICAgICAgICAgIHA6IC14IG9wdGlvbiBwcm92aWRlZCAtIG92ZXJyaWRpbmcgIiR7Y1ska2V5XX0gPT4gJHtvWyRvX2tleV19IgogICAgICAgICAgICBDT05GSUdbJGtleV09IiR7b1skb19rZXldfSIKICAgICAgICB9CiAgICAgICAgWyAhIC16ICIke2FbJGtleV19IiBdICYmIHsKICAgICAgICAgICAgcDogLXggYXJnIHByb3ZpZGVkIC0gb3ZlcnJpZGluZyAiJHtjWyRrZXldfSA9PiAke2FbJGtleV19IgogICAgICAgICAgICBDT05GSUdbJGtleV09IiR7YVska2V5XX0iCiAgICAgICAgfQogICAgZG9uZQogICAgdW5zZXQgX18KCiAgICByZXR1cm4gMAp9CgpmdW5jdGlvbiBtYWluOjpzY2FuLXNvdXJjZQp7CiAgICAjQHBhcmFtICAgICAkMT1wYXRoIHRvIHNvdXJjZSBkaXJlY3RvcnkKCiAgICAudHJhY2UgIiRAIgoKICAgIFsgLWQgIiQxIiBdIHx8IFsgLXIgIiQxIiBdIHx8IC5kaWUgLWUgY2Fubm90IGFjY2VzcyBzb3VyY2UgZGlyZWN0b3J5OiAiJDEiCgogICAgc2Nhbi1zb3VyY2U6Om1ha2UtaGVscGRvYygpCiAgICB7CiAgICAgICAgI0BwYXJhbSAgICAgJDE9cGF0aCB0byBzb3VyY2UgZmlsZQoKICAgICAgICAudHJhY2UgIiRAIgoKICAgICAgICBsb2NhbCBsaW5lIGRlc2MgcGFyYW0KCiAgICAgICAgZGVzYz0oJChzZWQgLW4gLWUgJy9eIyAqQGRlc2MgKi8ge3MvIyAqQGRlc2MgKi8vOyBwO30nICIkMSIpKQogICAgICAgICgoJHsjZGVzY1tAXX0gPiAwKSkgJiYKICAgICAgICAgICAgSEVMUE1BUFskZm5dPSIke2Rlc2NbKl19IiB8fAogICAgICAgICAgICBIRUxQTUFQWyRmbl09Ii0iCgogICAgICAgIHdoaWxlIElGUz0gcmVhZCAtcmEgbGluZTsgZG8KICAgICAgICAgICAgX189IiQocDogLWsgIiRsaW5lIiAtZCA9KSIgJiYKICAgICAgICAgICAgICAgIHBhcmFtKz0iJChwcmludGYgIiAgJS0yMHMlcyIgXAogICAgICAgICAgICAgICAgICAgICIke19fLy9cJC9cXFwkfSIgIiQocDogLXYgIiRsaW5lIiAtZCA9KVxuIikiCiAgICAgICAgZG9uZSA8PDwiJChzZWQgLW4gLWUgJy9eIyAqQHBhcmFtICovIHtzLyMgKkBwYXJhbSAqLy87IHA7fScgIiQxIikiCiAgICAgICAgdW5zZXQgX18KCiAgICAgICAgcGFyYW09IiR7cGFyYW06KyBbb3B0aW9uc11cbm9wdGlvbnM6XG4kcGFyYW19IgoKICAgICAgICBSRVNbbGliXSs9IiQoCiAgICAgICAgICAgIGNhdCA8PERPQwpjYXNlICJcJDEiIGluIFw/IHwgLWggfCAtLWhlbHApCmNhdCA8PEVPRgp1c2FnZTogXCR7MCMjKlwvfSAke2ZuLy8uL1wgfSRwYXJhbQpFT0YKZXhpdCAxCjs7CmVzYWNcbgpET0MKICAgICAgICApIgogICAgICAgIHJldHVybiAwCiAgICB9CgogICAgc2Nhbi1zb3VyY2U6Om1ha2UtbGliKCkKICAgIHsKICAgICAgICAjQHBhcmFtICAgICAkMT1wYXRoIHRvIHNjb3BlZCBzb3VyY2UgZGlyZWN0b3J5CgogICAgICAgIC50cmFjZSAiJEAiCgogICAgICAgIGxvY2FsIHJfcGF0aCBmaWxlCiAgICAgICAgbG9jYWwgLWwgYl9wYXRoIGJfZGlyIHBhcnRzIGsgdiBzX2tleSBmX2tleSBwX2tleSBzdWIKICAgICAgICBsb2NhbCAtYSBzZWVuCiAgICAgICAgbG9jYWwgLWkgaQoKICAgICAgICByX3BhdGg9IiQocmVhbHBhdGggIiQxIikiCiAgICAgICAgYl9wYXRoPSIke3JfcGF0aCMjKiIkKGRpcm5hbWUgIiRzcmMiKSJcL30iCgogICAgICAgIFtbICRiX3BhdGggPT0gKicgJyogXV0gJiYKICAgICAgICAgICAgcDogLXcgYmFzZSBwYXRoIGNvbnRhaW5zIHNwYWNlIHRoYXQgd2lsbCBiZSByZXBsYWNlZCB3aXRoICciLSInOiBcCiAgICAgICAgICAgICAgICAiJHtiX3BhdGglJVwvKn0vXDAzM1szMW0ke2JfcGF0aCMqXC99XDAzM1swbSIKCiAgICAgICAgcHVzaGQgIiRyX3BhdGgiID4vZGV2L251bGwKCiAgICAgICAgd2hpbGUgSUZTPSByZWFkIC1yYSBmaWxlOyBkbwogICAgICAgICAgICBbICEgLXIgIiRmaWxlIiBdICYmIGNvbnRpbnVlICMgc2tpcCBpbmFjY2Vzc2libGUKCiAgICAgICAgICAgIF9fPSIkKHJlYWxwYXRoICIkZmlsZSIpIgogICAgICAgICAgICBmbj0iJChwOiAtLWZuICIke19fIyMqJHNjb3BlXC99IikiCiAgICAgICAgICAgIF9fPSIkKGRpcm5hbWUgIiRfXyIpIgogICAgICAgICAgICBiX2Rpcj0iJHtfXyMjKlwvfSIgJiYgdW5zZXQgX18KCiAgICAgICAgICAgIFsgIiR7Yl9kaXJ9IiA9PSBwdWJsaWMgXSAmJgogICAgICAgICAgICAgICAgW1sgISAiICR7TUFJTkxJU1RbQF19ICIgPX4gIiAkZm4gIiBdXSAmJgogICAgICAgICAgICAgICAgTUFJTkxJU1QrPSgiJGZuIikKCiAgICAgICAgICAgIFsgLWQgIiRmaWxlIiBdICYmIHsKICAgICAgICAgICAgICAgIFsgIiRzY29wZSIgPT0gcHVibGljIF0gJiYgWyAiJHtiX2Rpcn0iICE9IHB1YmxpYyBdICYmIHsKICAgICAgICAgICAgICAgICAgICBzdWI9IiQocDogLS1mbiAiJGZpbGUiKSIKICAgICAgICAgICAgICAgICAgICBwX2tleT0iJHN1YltwcmVdIgogICAgICAgICAgICAgICAgICAgIEhFTFBNQVBbJHBfa2V5XT0iJHtmbiUlLiRzdWIqfSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNjYW4tc291cmNlOjptYWtlLWxpYiAiJGZpbGUiCiAgICAgICAgICAgIH0gfHwgewogICAgICAgICAgICAgICAgWyAteiAiJChoZWFkIC1uNSAiJGZpbGUiKSIgXSAmJiBjb250aW51ZSAjIHNraXAgZW1wdHkKCiAgICAgICAgICAgICAgICBbWyAiICR7c2VlbltAXX0gIiA9fiAiICRmbiAiIF1dICYmCiAgICAgICAgICAgICAgICAgICAgLmRpZSAtZSBkdXBsaWNhdGUgZnVuY3Rpb24gZm91bmQgYmV0d2VlbiBzY29wZXM6ICIkZm4iCgogICAgICAgICAgICAgICAgUkVTW2xpYl0rPSJmdW5jdGlvbiAkZm4ge1xuIgoKICAgICAgICAgICAgICAgIFsgIiRzY29wZSIgPT0gcHVibGljIF0gJiYgewogICAgICAgICAgICAgICAgICAgIHNjYW4tc291cmNlOjptYWtlLWhlbHBkb2MgIiRmaWxlIgoKICAgICAgICAgICAgICAgICAgICBbICIke2JfZGlyLCx9IiAhPSBwdWJsaWMgXSAmJiB7CiAgICAgICAgICAgICAgICAgICAgICAgIElGUz0nLicKICAgICAgICAgICAgICAgICAgICAgICAgcmVhZCAtcmEgcGFydHMgPDw8IiRmbiIKICAgICAgICAgICAgICAgICAgICAgICAgdW5zZXQgSUZTCgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKChpID0gMDsgaSA8ICR7I3BhcnRzW0BdfSAtIDE7IGkrKykpOyBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaz0iJHtwYXJ0c1tpXX0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2PSIke3BhcnRzW2kgKyAxXX0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzX2tleT0iJGtbc3ViXSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZfa2V5PSIka1tmbl0iCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgW1sgISAke1NVQk1BUFskc19rZXldfSA9fiAiJHYgIiBdXSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsgISAteiAiJHYiIF0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTVUJNQVBbJHNfa2V5XSs9IiR2ICIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIRUxQTUFQWyRzX2tleV0rPSIkdiAiCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyAiJChwOiAtLWZuICIkYl9kaXIiKSIgPT0gIiRrIiBdICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWyAhIC16ICIkZm4iIF0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTVUJNQVBbJGZfa2V5XSs9IiRmbiAiCiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBSRVNbbGliXSs9IiQoZ3JlcCAnXlteI10nICIkZmlsZSIpXG59XG4iCiAgICAgICAgICAgICAgICBzZWVuKz0oIiRmbiIpCiAgICAgICAgICAgIH0KICAgICAgICBkb25lIDw8PCIkKGxzKSIKCiAgICAgICAgcG9wZCA+L2Rldi9udWxsCgogICAgICAgIHJldHVybiAwCiAgICB9CgogICAgbG9jYWwgc3JjIGRlY2xhcmVzCiAgICBsb2NhbCAtbCBmbgoKICAgIGZvciBzY29wZSBpbiBwcml2YXRlIHB1YmxpYzsgZG8KICAgICAgICBzcmM9IiQxLyRzY29wZSIKICAgICAgICBbIC1kICIkc3JjIiBdICYmCiAgICAgICAgICAgIHNjYW4tc291cmNlOjptYWtlLWxpYiAiJHNyYyIKICAgIGRvbmUKCiAgICAjIG1vdmUgYWxsIGRlY2xhcmUgc3RhdGVtZW50cywgZXhjZXB0IGZvciB0aG9zZSB3aXRoIC1HCiAgICBkZWNsYXJlcz0nXmRlY2xhcmVccypcLVteR11ccyouKiQnCiAgICBSRVNbdmFyXT0iJChlY2hvIC1lICIke3JbbGliXX0iIHwgZ3JlcCAtRSAiJGRlY2xhcmVzIikiCiAgICBSRVNbbGliXT0iJChlY2hvIC1lICIke3JbbGliXX0iIHwgZ3JlcCAtdkUgIiRkZWNsYXJlcyIpXG4iCgogICAgcmV0dXJuIDAKfQoKZnVuY3Rpb24gbWFpbjo6bWFrZS1leGVjCnsKICAgIC50cmFjZSAiJEAiCgogICAgbG9jYWwgLWwgcyBtIGNtZCBzdWIgb3B0IGZuIHNfa2V5IGZfa2V5IGhfa2V5IHBfa2V5CiAgICBsb2NhbCAtYSBzZWVuX2ZuIHNlZW5fb3B0IHNlZW5fc3ViCiAgICBsb2NhbCBoX29wdCB2X29wdCBvcHRpb25zIGhlbHAKCiAgICBoX29wdD0iJChwcmludGYgIiAgJS0yMHMlc1xuIiAiLWgsLS1oZWxwIiAicHJpbnQgdGhpcyBoZWxwIG1lc3NhZ2UiKSIKICAgIHZfb3B0PSIkKHByaW50ZiAiICAlLTIwcyVzXG4iICItdiwtLXZlcnNpb24iIFwKICAgICAgICAicHJpbnQgdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiB0aGlzIGV4ZWN1dGFibGUiKSIKCiAgICBmb3IgcyBpbiAiJHshU1VCTUFQW0BdfSI7IGRvCiAgICAgICAgc3ViPSIke3MlWyp9IgogICAgICAgIHNfa2V5PSIkc3ViW3N1Yl0iCiAgICAgICAgZl9rZXk9IiRzdWJbZm5dIgogICAgICAgIHBfa2V5PSIkc3ViW3ByZV0iCiAgICAgICAgb3B0aW9ucz0KICAgICAgICBoZWxwPQoKICAgICAgICB3aGlsZSBJRlM9IHJlYWQgLXJhIG9wdDsgZG8KICAgICAgICAgICAgd2hpbGUgSUZTPSByZWFkIC1yYSBmbjsgZG8KICAgICAgICAgICAgICAgICMgbmVzdGVkIGZ1bmN0aW9ucwogICAgICAgICAgICAgICAgWyAiJHtmbiMjKi59IiA9PSAiJG9wdCIgXSAmJgogICAgICAgICAgICAgICAgICAgIFtbICEgIiAke3NlZW5fZm5bQF19ICIgPX4gIiAkZm4gIiBdXSAmJiB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucys9IiRvcHQpIHNoaWZ0ICYmICRmbiBcIlwkQFwiOyBleGl0IFwkPyA7O1xuIgogICAgICAgICAgICAgICAgICAgIGhlbHArPSIkKHByaW50ZiAiICAlLTIwcyVzXG4iIFwKICAgICAgICAgICAgICAgICAgICAgICAgIiRvcHQiICIke0hFTFBNQVBbJGZuXX1cbiIpIgogICAgICAgICAgICAgICAgICAgIHNlZW5fZm4rPSgiJGZuIikKICAgICAgICAgICAgICAgICAgICBzZWVuX29wdCs9KCIkb3B0IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgZG9uZSA8PDwiJChlY2hvIC1lICIke1NVQk1BUFskZl9rZXldLy9cIC9cXG59IikiCgogICAgICAgICAgICAjIG5lc3RlZCBzdWItbW9kdWxlcwogICAgICAgICAgICBbWyAhICIgJHtzZWVuX29wdFtAXX0gIiA9fiAiICRvcHQgIiBdXSAmJiB7CiAgICAgICAgICAgICAgICBoX2tleT0iJG9wdFtzdWJdIgogICAgICAgICAgICAgICAgb3B0aW9ucys9IiRvcHQpIHNoaWZ0ICYmICRvcHQgXCJcJEBcIjsgZXhpdCBcJD8gOztcbiIKICAgICAgICAgICAgICAgIGhlbHArPSIkKHByaW50ZiAiICAlLTIwcyVzXG4iIFwKICAgICAgICAgICAgICAgICAgICAiJG9wdCIgInskKGVjaG8gLWUgIiR7SEVMUE1BUFskaF9rZXldLy9cIC8sXCB9IiB8CiAgICAgICAgICAgICAgICAgICAgICAgIHNlZCAncy8sXCAqJC8vJyl9XG4iKSIKICAgICAgICAgICAgICAgIHNlZW5fb3B0Kz0oIiRvcHQiKQogICAgICAgICAgICB9CiAgICAgICAgZG9uZSA8PDwiJChlY2hvIC1lICIke1NVQk1BUFskc19rZXldLy9cIC9cXG59IikiCgogICAgICAgIFtbICEgIiAke3NlZW5fc3ViW0BdfSAiID1+ICIgJHN1YiAiIF1dICYmIHsKICAgICAgICAgICAgWyAhIC16ICIke0hFTFBNQVBbJHBfa2V5XX0iIF0gJiYgewogICAgICAgICAgICAgICAgY21kPSIke0hFTFBNQVBbJHBfa2V5XS8vLi9cIH0gJHN1YiIKICAgICAgICAgICAgfSB8fCBjbWQ9IiRzdWIiCgogICAgICAgICAgICBSRVNbYmluXSs9IiQoCiAgICAgICAgICAgICAgICBjYXQgPDxET0MKJHN1YigpIHsKJCgKICAgICAgICAgICAgICAgICAgICBbICIke2Nbc1tlcnJfbm9hcmdzXV19IiA9PSB0cnVlIF0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgY2F0IDw8RE9DQwooKFwkIyA9PSAwKSkgJiYgewplY2hvIG5vIGFyZ3VtZW50cyBwcm92aWRlZAplY2hvIHByaW50IGhlbHAgd2l0aCAiXCR7MCMjKlwvfSIgJGNtZCAtLWhlbHAKZXhpdCAxCn0KRE9DQwogICAgICAgICAgICAgICAgKQp3aGlsZSAoKFwkIyA+IDApKTsgZG8KY2FzZSAiXCQxIiBpbgpcPyB8IC1oIHwgLS1oZWxwKQpjYXQgPDxFT0YKdXNhZ2U6IFwkezAjIypcL30gJGNtZCBbb3B0aW9uc10Kb3B0aW9uczoKJGhlbHAKJGhfb3B0CkVPRgpleGl0IDEKOzsKJG9wdGlvbnMKJCgKICAgICAgICAgICAgICAgICAgICBbICIke2Nbc1tlcnJfaWxsZWdhbG9wdF1dfSIgPT0gdHJ1ZSBdICYmCiAgICAgICAgICAgICAgICAgICAgICAgIGNhdCA8PERPQ0MKKikgZWNobyBpbGxlZ2FsIG9wdGlvbjogIidcJDEnIiAmJiBleGl0IDEgOzsKRE9DQwogICAgICAgICAgICAgICAgKQoKZXNhYwpzaGlmdApkb25lCn1cbgpET0MKICAgICAgICAgICAgKSIKICAgICAgICAgICAgc2Vlbl9zdWIrPSgiJHN1YiIpCiAgICAgICAgfQogICAgZG9uZQogICAgdW5zZXQgb3B0aW9ucyBoZWxwIGhfa2V5CgogICAgZm9yIG0gaW4gIiR7TUFJTkxJU1RbQF19IjsgZG8KICAgICAgICBoX2tleT0iJG1bc3ViXSIKICAgICAgICBvcHRpb25zKz0iJG0pIHNoaWZ0ICYmICRtIFwiXCRAXCI7IGV4aXQgXCQ/OztcbiIKICAgICAgICBbICEgLXogIiR7SEVMUE1BUFskaF9rZXldfSIgXSAmJiB7CiAgICAgICAgICAgIGhlbHArPSIkKHByaW50ZiAiICAlLTIwcyVzXG4iIFwKICAgICAgICAgICAgICAgICIkbSIgInskKGVjaG8gLWUgIiR7SEVMUE1BUFskaF9rZXldLy9cIC8sXCB9IiB8CiAgICAgICAgICAgICAgICAgICAgc2VkICdzLyxcICokLy8nKX1cbiIpIgogICAgICAgIH0gfHwgaGVscCs9IiQocHJpbnRmICIgICUtMjBzJXNcbiIgIiRtIiAiJHtIRUxQTUFQWyRtXX1cbiIpIgogICAgZG9uZQoKICAgIFJFU1tiaW5dKz0iJCgKICAgICAgICBjYXQgPDxET0MKJCgKICAgICAgICAgICAgWyAiJHtjW3NbZXJyX25vYXJnc11dfSIgPT0gdHJ1ZSBdICYmCiAgICAgICAgICAgICAgICBjYXQgPDxET0NDCigoXCQjID09IDApKSAmJiB7CmVjaG8gbm8gYXJndW1lbnRzIHByb3ZpZGVkCmVjaG8gcHJpbnQgaGVscCB3aXRoICJcJHswIyMqXC99IiAtLWhlbHAKZXhpdCAxCn0KRE9DQwogICAgICAgICkKVkVSU0lPTj0iJHtjW3NbdmVyc2lvbl1dfSIKJHtyW3Zhcl19CndoaWxlICgoXCQjID4gMCkpOyBkbwpjYXNlICJcJDEiIGluClw/IHwgLWggfCAtLWhlbHApCmNhdCA8PEVPRgp1c2FnZTogXCR7MCMjKlwvfSBbb3B0aW9uc10Kb3B0aW9uczoKJGhlbHAKJHZfb3B0CiRoX29wdApFT0YKZXhpdCAxCjs7Ci12IHwgLS12ZXJzaW9uKQplY2hvICJcJFZFUlNJT04iCmV4aXQgMQo7Owokb3B0aW9ucwokKAogICAgICAgICAgICBbICIke2Nbc1tlcnJfaWxsZWdhbG9wdF1dfSIgPT0gdHJ1ZSBdICYmCiAgICAgICAgICAgICAgICBjYXQgPDxET0NDCiopIGVjaG8gaWxsZWdhbCBvcHRpb246ICInXCQxJyIgJiYgZXhpdCAxIDs7CkRPQ0MKICAgICAgICApCgplc2FjCnNoaWZ0CmRvbmUKZXhpdCAwCkRPQwogICAgKSIKCiAgICByZXR1cm4gMAp9CgojIG1haW4KZGVjbGFyZSAtQSBBUkcgT1BUIENPTkZJRyBSRVMgU1VCTUFQIEhFTFBNQVAKZGVjbGFyZSAtYSBNQUlOTElTVApkZWNsYXJlIC1uIGM9Q09ORklHIHI9UkVTIGE9QVJHIG89T1BUCl9fVkVSU0lPTl9fPTEuMC4wCl9fPQoKd2hpbGUgKCgkIyA+IDApKTsgZG8KICAgIGNhc2UgIiQxIiBpbgogICAgLXYgfCAtLXZlcnNpb24pCiAgICAgICAgZWNobyAiJF9fVkVSU0lPTl9fIiAmJiBleGl0IDEKICAgICAgICA7OwogICAgLWMgfCAtLWNvbmZpZykKICAgICAgICBbIC16ICIkMiIgXSAmJiAuZGllIG5vIHZhbHVlIHByb3ZpZGVkOiAiJDEgPyIKICAgICAgICBBUkdbY109IiQyIiAmJiBzaGlmdAogICAgICAgIDs7CiAgICAtcyB8IC0tc3JjKQogICAgICAgIFsgLXogIiQyIiBdICYmIC5kaWUgbm8gdmFsdWUgcHJvdmlkZWQ6ICIkMSA/IgogICAgICAgIEFSR1tiW3NyY11dPSIkMiIgJiYgc2hpZnQKICAgICAgICA7OwogICAgLW8gfCAtLW91dCkKICAgICAgICBbIC16ICIkMiIgXSAmJiAuZGllIG5vIHZhbHVlIHByb3ZpZGVkOiAiJDEgPyIKICAgICAgICBBUkdbYltvdXRdXT0iJDIiICYmIHNoaWZ0CiAgICAgICAgOzsKICAgIC1uIHwgLS1uYW1lKQogICAgICAgIFsgLXogIiQyIiBdICYmIC5kaWUgbm8gdmFsdWUgcHJvdmlkZWQ6ICIkMSA/IgogICAgICAgIEFSR1tiW25hbWVdXT0iJDIiICYmIHNoaWZ0CiAgICAgICAgOzsKICAgIC0tb3B0IHwgLS1vcHRpb24pCiAgICAgICAgWyAteiAiJDIiIF0gJiYgLmRpZSBubyB2YWx1ZSBwcm92aWRlZDogIiQxID8iCiAgICAgICAgaz0iJChwOiAtayAiJDIiIC1kID0pIgogICAgICAgIHY9IiQocDogLXYgIiQyIiAtZCA9KSIKICAgICAgICBbIC16ICIkdiIgXSAmJiAuZGllIG5vIHZhbHVlIHByb3ZpZGVkOiAiJGsgPyIKICAgICAgICBPUFRbIiRrIl09IiR2IgogICAgICAgIHVuc2V0IGsgdgogICAgICAgIHNoaWZ0CiAgICAgICAgOzsKICAgIC1kIHwgLS1kcnktcnVuKQogICAgICAgIEFSR1tkXT10cnVlCiAgICAgICAgOzsKICAgIC1xIHwgLS1xdWlldCkKICAgICAgICBleGVjID4vZGV2L251bGwgMj4mMQogICAgICAgIDs7CiAgICAteCB8IC14eCB8IC0tdmVyYm9zZSkKICAgICAgICBbICIkezEjKi19IiA9PSB4eCBdICYmIEFSR1t4eF09dHJ1ZQogICAgICAgIEFSR1t4XT10cnVlCiAgICAgICAgOzsKICAgIFw/IHwgLWggfCAtLWhlbHApCiAgICAgICAgY2F0IDw8RU9GCnVzYWdlOiAkX19NQUlOX18gW29wdGlvbnNdCm9wdGlvbnM6CiAgLWMsLS1jb25maWcgPGZpbGU+ICBzcGVjaWZ5IGEgY29uZmlnIGZpbGUgdG8gcmVhZCBmcm9tCiAgLXMsLS1zcmMgPHBhdGg+ICAgICBzcGVjaWZ5IGEgc291cmNlIGRpcmVjdG9yeSB0byByZWFkIGZyb20KICAtbywtLW91dCA8cGF0aD4gICAgIHNwZWNpZnkgYW4gb3V0cHV0IGRpcmVjdG9yeSB0byBwbGFjZSB0aGUgYnVuZGxlCiAgLW4sLS1uYW1lIDx2YWw+ICAgICBzcGVjaWZ5IGEgbmFtZSBmb3IgdGhlIGJ1bmRsZQogIC0tb3B0IDxrZXk+PTx2YWw+ICAgc3BlY2lmeSBhZGRpdGlvbmFsIGNvbmZpZyBvcHRpb24KICAtZCwtLWRyeS1ydW4gICAgICAgIGRvIG5vdCB3cml0ZSBidW5kbGUgdG8gZmlsZSwgcHJpbnQgdG8gY29uc29sZQogIC1xLC0tcXVpZXQgICAgICAgICAgc3VwcHJlc3MgYWxsIG91dHB1dCB0byBjb25zb2xlCiAgLXgsLXh4LC0tdmVyYm9zZSAgICBwcmludCB2ZXJib3NlIG91dHB1dCB0byB0aGUgY29uc29sZQogIC1oLC0taGVscCAgICAgICAgICAgcHJpbnQgdGhpcyBoZWxwIG1lc3NhZ2UKICAtdiwtLXZlcnNpb24gICAgICAgIHByaW50IHZlcnNpb24KRU9GCiAgICAgICAgZXhpdCAxCiAgICAgICAgOzsKICAgICopCiAgICAgICAgZWNobyBpbGxlZ2FsIG9wdGlvbjogIiQxIgogICAgICAgIGV4aXQgMQogICAgICAgIDs7CiAgICBlc2FjCiAgICBzaGlmdApkb25lCgptYWluOjpjaGVjay1kZXBlbmRlbmNpZXMKCiMgZGVmYXVsdHMKQ09ORklHW2Jbc3JjXV09Li9zcmMKQ09ORklHW2Jbb3V0XV09Li9vdXQKQ09ORklHW2JbbmFtZV1dPWJ1bmRsZWQKQ09ORklHW3NbdmVyc2lvbl1dPTAuMS4wCkNPTkZJR1tzW2xpYm9ubHldXT1mYWxzZQpDT05GSUdbc1tlcnJfbm9hcmdzXV09ZmFsc2UKQ09ORklHW3NbZXJyX2lsbGVnYWxvcHRdXT1mYWxzZQoKWyAhIC16ICIke2FbY119IiBdICYmCiAgICBtYWluOjpsb2FkLWNvbmZpZyAiJHthW2NdfSIgfHwKICAgIG1haW46OmxvYWQtY29uZmlnICIkUFdEL2J1bnNoLmNvbmZpZyIgfHwKICAgIHA6IC14IG5vIGNvbmZpZyBmaWxlIGxvYWRlZCAtIGZhbGxpbmcgYmFjayB0byBkZWZhdWx0cyBhbmQgYXJndW1lbnRzCgptYWluOjpwYXJzZS1hcmdzCm1haW46OnNjYW4tc291cmNlICIke2NbYltzcmNdXX0iCgpbICIke2Nbc1tsaWJvbmx5XV19IiA9PSB0cnVlIF0gJiYgewogICAgcDogLXggY3JlYXRpbmcgbGlicmFyeSBPTkxZCiAgICBSRVNbbGliXT0iJChlY2hvIC1lICIke3JbbGliXX0iIHwgc2VkICdzL2V4aXQvcmV0dXJuL2cnKSIKfSB8fCBtYWluOjptYWtlLWV4ZWMKClJFU1tib2R5XT0nIyEvdXNyL2Jpbi9lbnYgYmFzaFxuJwpSRVNbYm9keV0rPSIke3JbbGliXX0iClJFU1tib2R5XSs9IiR7cltiaW5dfSIKClsgIiR7YVtkXX0iID09IHRydWUgXSAmJiB7CiAgICBlY2hvIC1lICIke3JbYm9keV19IiB8IGdyZXAgLXYgJ14kJwp9IHx8IHsKICAgIFsgIiR7Y1tiW25hbWVdXX0iID09IGJ1bmRsZWQgXSAmJiB7CiAgICAgICAgX189IiQoc2hhMjU2c3VtIDw8PCIke3JbYm9keV19IikiCiAgICAgICAgX189IiR7X18lXCBcICp9IgogICAgICAgIENPTkZJR1tiW25hbWVdXSs9LSIke19fOiAtOH0iCiAgICAgICAgdW5zZXQgX18KICAgIH0KCiAgICBwOiAteCB3cml0aW5nIGZpbGU6ICIke2NbYltvdXRdXX0vJHtjW2JbbmFtZV1dfSIKCiAgICBbICEgLWQgIiR7Y1tiW291dF1dfSIgXSAmJiBta2RpciAtcCAiJHtjW2Jbb3V0XV19IgogICAgZWNobyAtZSAiJHtyW2JvZHldfSIgfCBncmVwIC12ICdeJCcgPiIke2NbYltvdXRdXX0vJHtjW2JbbmFtZV1dfSIKCiAgICBbICEgLXogIiQoY2F0ICR7Y1tiW291dF1dfS8ke2NbYltuYW1lXV19KSIgXSAmJiB7CiAgICAgICAgY2htb2QgK3ggIiR7Y1tiW291dF1dfS8ke2NbYltuYW1lXV19IgogICAgICAgIGVjaG8gIlsgJChkYXRlICsiJVktJW0tJWQgJUg6JU06JVMiKSBdIiBcCiAgICAgICAgICAgICIke2NbYltuYW1lXV19ICh2JHtjW3NbdmVyc2lvbl1dfSkiICI9PiIgXAogICAgICAgICAgICAiJChyZWFscGF0aCAke2NbYltvdXRdXX0vJHtjW2JbbmFtZV1dfSkiCgogICAgICAgIHA6IC14IHN0YXJ0IHVzaW5nICInJHtjW2JbbmFtZV1dfSciIHdpdGggb25lIG9mIHRoZSBmb2xsb3dpbmcgXAogICAgICAgICAgICBvcHRpb25zOidcbiAgICcgXAogICAgICAgICAgICAtIGFwcGVuZCB0aGUgZm9sbG93aW5nIHRvIHlvdXIgJ34vLmJhc2hfcHJvZmlsZSc6IFwKICAgICAgICAgICAgImV4cG9ydCBQQVRIPVwkUEFUSDokKHJlYWxwYXRoICR7Y1tiW291dF1dfSlcbiAgICIgXAogICAgICAgICAgICAtIGNyZWF0ZSBhIHN5bWJvbGljIGxpbmsgYnkgZXhlY3V0aW5nOiAnc3VkbyBsbiAtcycgXAogICAgICAgICAgICAiJChyZWFscGF0aCAke2NbYltvdXRdXX0vJHtjW2JbbmFtZV1dfSkiIFwKICAgICAgICAgICAgIi91c3IvYmluLyR7Y1tiW25hbWVdXX0iCiAgICB9IHx8IC5kaWUgLWUgY291bGQgbm90IHdyaXRlIGZpbGU6ICIke2NbYltvdXRdXX0vJHtjW2JbbmFtZV1dfSIKfQoKcDogLWEgLXggQ09ORklHCgpleGl0IDAK'
__MAIN__="${0##*\/}" \
/usr/bin/env bash <(base64 -d <<<"$MAIN") "$@"
exit $?
